<div class="calendar-container mat-elevation-z2">
  <!-- Calendar Header -->
  <mat-toolbar color="primary">
    <button mat-icon-button (click)="previousWeek()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <span class="week-title">{{ currentWeekStart | date:'MMM d' }} - {{ currentWeekEnd | date:'MMM d, yyyy' }}</span>
    <button mat-icon-button (click)="nextWeek()">
      <mat-icon>chevron_right</mat-icon>
    </button>
    <span class="spacer"></span>
    <button mat-raised-button (click)="openAddEventDialog()">
      <mat-icon>add</mat-icon>
      Add Event
    </button>
  </mat-toolbar>

  <!-- Calendar Grid -->
  <div class="calendar-grid">
    <!-- Time Labels -->
    <div class="time-labels">
      <div class="time-label" *ngFor="let hour of hours">
        {{ hour }}:00
      </div>
    </div>

    <!-- Days -->
    <div class="days-container">
      <!-- Day Headers -->
      <div class="day-headers">
        <div class="day-header" *ngFor="let day of days">
          <div class="day-name">{{ day | date:'EEE' }}</div>
          <div class="day-date">{{ day | date:'d' }}</div>
        </div>
      </div>

      <!-- Time Slots -->
      <div class="time-slots">
        <div class="day-column" *ngFor="let day of days">
          <div class="time-slot" *ngFor="let hour of hours" (click)="openAddEventDialog(day, hour)">
          </div>
        </div>
      </div>

      <!-- Events -->
      <div class="events-layer">
        <div class="event" *ngFor="let event of events" [style.top.px]="getEventTop(event)"
          [style.left.%]="getEventLeft(event)" [style.height.px]="getEventHeight(event)"
          [style.backgroundColor]="event.color || '#1976d2'" (click)="editEvent(event)">
          {{ event.title }}
        </div>
      </div>
    </div>
  </div>
</div>
